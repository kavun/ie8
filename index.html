<!DOCTYPE html>
<html>
	<head>
		<title>IE8 > IE7</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<style type="text/css">
			@import url(http://fonts.googleapis.com/css?family=Raleway:300);
			@import url(http://fonts.googleapis.com/css?family=Source+Code+Pro:400,600);
			@import url(http://fonts.googleapis.com/css?family=Source+Sans+Pro);

			body {
				font-family: 'Source Sans Pro';
				font-weight: 400;
				color: #333;
			}
			h1, h2, h3 {
				font-family: 'Raleway';
				font-weight: 300;
			}
			a {
				color: #3F8EE2;
				text-decoration: none;
			}
			a:hover {
				text-decoration: underline;
			}
			.remark-code, .remark-inline-code { 
				font-family: 'Source Code Pro';
				font-weight: 400;
			}
			.remark-inline-code {
				font-weight: 600;
			}
			.full-image {
				-webkit-background-size: cover;
				-moz-background-size: cover;
				-o-background-size: cover;
				background-size: cover;
				padding: 0;
			}
			.title-slide h1 {
				font-size: 5em;
				padding: 0;
				margin: 0;
			}
			.title-slide h2 {
				padding: 0;
				margin: 0;
			}
			.remark-code-line-highlighted {
				background-color: rgba(88, 88, 88, 0.5);
			}
			::selection {
				background: rgb(255, 247, 181); /* WebKit/Blink Browsers */
				color: #333;
			}
			::-moz-selection {
				background: rgb(255, 247, 181); /* Gecko Browsers */
			}
		</style>
	</head>
	<body>

		<textarea id="source">

class: left, middle, title-slide
# What's new in IE8?
## More than you think, now that IE7 is gone
---
## New features in IE8

Comparison of features in IE7 & IE8 → http://caniuse.com/#compare=ie+7,ie+8

- [WAI-ARIA Accessiblity Features](#wai)
- [querySelector / querySelectorAll](#querySelector)
- [JSON.parse / JSON.stringify](#json)
- [localStorage / sessionStorage](#localStorage)
- [hashchange event](#hashchange)
- [CSS outline](#cssoutline)
- [CSS table display](#csstable)
- [CSS counters](#csscounters)
- [CSS3 box-sizing](#boxsizing)
- [CSS content for pseudo elements](#csscontent)
- [Data URIs](#datauris)
- [Cross document messaging](#cdm)
- [Cross origin resource sharing](#cors)

---
name:wai
## WAI-ARIA Accesiblity Features

> Semantic information about widgets, structures, and behaviors, in
> order to allow assistive technologies to convey appropriate
> information to persons with disabilities.

> http://www.w3.org/TR/wai-aria/

--

`aria-labelledby`, `aria-invalid`, `aria-expanded`, `aria-readonly`

```html
<label for="name">Name</label>
<input type="text" id="name" />

<label id="lblName">Name</label>
*<input type="text" aria-labelledby="lblName" />
```
---
name:querySelector
## querySelector / querySelectorAll

✗ IE7 vanilla
```js
var inputs = document.getElementsByTagName('input');
var checkboxes = [];
for (var i = 0, l = inputs.length; i < l; i++) {
	if (inputs[i].type === 'checkbox') {
		checkboxes.push(inputs[i]);
	}
}
```
--
✓ jQuery
```js
var checkboxes = $('input[type="checkbox"]');
```
--
★ IE8 vanilla
```js
var checkboxes = document.querySelectorAll('input[type="checkbox"]');
```

---

## querySelector / querySelectorAll

Single element
```js
document.querySelector('input'); // will return only one input
document.querySelectorAll('input'); // will return all inputs
```
--
Select by `id`
```js
// selects a single element with id="lblSoupSize"
document.querySelector('#lblSoupSize');
```
--
Select by `className`
```js
document.querySelectorAll('.soups');
```

---

## querySelector / querySelectorAll

Select by attribute
```js
document.querySelector('[data-soupid="4d7c6b21"]');
```
--
Relative selectors
```js
document.querySelector('.soup .spoon');
```
--
More selectors: http://www.w3.org/TR/CSS2/selector.html

---
name:json
## JSON.parse / JSON.stringify

In IE7 you could use `JavaScriptSerializer` from ASP.NET Ajax, or you could shim `JSON` with [bestiejs/json3](http://bestiejs.github.io/json3/)
```js
var obj = Sys.Serialization.JavaScriptSerializer.serialize(json);
var json = Sys.Serialization.JavaScriptSerializer.deserialize(obj);
```
--
In IE8
```js
var obj = JSON.parse(json);
var json = JSON.stringify(obj);
```
```js
JSON.stringify({ soupOfTheYear: 'black bean' });
// > "{"soupOfTheYear":"black bean"}"
```
---
name:localStorage
## localStorage / sessionStorage

Persistent storage *in the browser*

In IE7 we had [cookies](http://www.quirksmode.org/js/cookies.html#ex)

In IE8 we have *the Storage interface*
```
interface Storage {
	readonly attribute unsigned long length;
	DOMString? key(unsigned long index);
	getter DOMString? getItem(DOMString key);
	setter creator void setItem(DOMString key, DOMString value);
	deleter void removeItem(DOMString key);
	void clear();
};
```
---
## Session Storage

In browser storage that persists for a single _page_ session.

What's a session?
- Browser is open
- Persists between page reloads
- New tab or a redirect will create a new _page_ session

Useful for saving state of a page (form fields) in case of accidental refresh by a user.

```js
sessionStorage.setItem('soupOfTheDay', 'tomato');
sessionStorage.getItem('soupOfTheDay');
```
---

## Local Storage

Same as `sessionStorage` but it ...
- persists between redirects
- persists when opening and closing the browser
- exists across a whole domain

--

Useful for
- caching assets (like [addyosmani/basket.js](http://addyosmani.github.io/basket.js/))
- saving user preferences like color scheme or font size preferences
- saving reusable form fields, like "User Name"

---

## Local Storage

```js
localStorage.setItem('soupOfTheWeek', 'bisque');
localStorage.getItem('soupOfTheWeek');
```

```js
var obj = { soup: 'Kale' };

// set with JSON.stringify
localStorage.setItem('soup', JSON.stringify(obj));

// get with JSON.parse
obj = JSON.parse(localStorage.getItem('soup'));
```
---
name:hashchange
## hashchange event

```js
window.onhashchange = function () {
	alert(location.hash);
};

function hashTo(hash) {
	location.hash = hash;
}

hashTo('hashySoup');
// > #hashySoup
```

---
name:cssoutline
class: middle, center
# [CSS outline](http://codepen.io/kavun/pen/axhiv)

---
name:csstable
class: middle, center
# [CSS table display](http://codepen.io/kavun/pen/Jovdn)

---
name:csscounters
class: middle, center
# [CSS counters](http://codepen.io/kavun/pen/pGcnk)

---
name:boxsizing
class: middle, center
# [CSS3 box-sizing](http://codepen.io/kavun/pen/LjFiq?editors=110)

---
name:csscontent
class: middle, center
# [CSS content for pseudo elements](http://codepen.io/kavun/pen/slEod)

---
name:datauris
class: middle, center
# [Data URIs](http://codepen.io/kavun/pen/iByxo?editors=100)

---
name:cdm
# Cross document messaging
- Enables cross-origin communication via `window.postMessage`
--

- Same-origin would be locations with the same protocol (`http` port `80`), so cross-origin would be across different protocols
--

- `window` can be
	- `contentWindow` of an `iframe` element
	- the object returned by `window.open`
	- an object in `window.frames`
--

- When listening for messages sent with `window.postMessage`, **always** check the message's `origin` (URL) and `sender` (`window`) properties to prevent cross-site scripting attacks


---
name:cors
# Cross origin resource sharing (CORS)
How can we make an AJAX call from one domain to another?
--

- Before CORS there was JSONP for cross domain resource loading
```js
function myCallback(data) {}
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'http://www.someserver.com/api?callback=myCallback';
document.body.appendChild(script);
```
--

- IE8 added partial support for CORS with its `XDomainRequest` object
```js
var xhr = new XDomainRequest();
xhr.open('GET', 'https://someserver.com/someresource');
```
--

- All other modern browsers use XMLHttpRequest2 which builds CORS into `XMLHttpRequest`
```js
var xhr = new XMLHttpRequest();
xhr.open('GET', 'https://someserver.com/someresource', true);
```

---
# Cross origin resource sharing (CORS)
- More information from IEInternals about ["Restrictions, Limitations and Workarounds" of `XDomainRequest`](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)
- Cross-browser tutorials on CORS
	- [HTML5Rocks - "Using CORS"](http://www.html5rocks.com/en/tutorials/cors/)
	- [Telerik - "Using CORS with All (Modern) Browsers"](http://blogs.telerik.com/kendoui/posts/11-10-03/using_cors_with_all_modern_browsers)

---
class: center, top
# Enjoy IE8!
--

Until you find out [how much better IE9 became](http://caniuse.com/#compare=ie+8,ie+9)

		</textarea>

		<script src="remark.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			var slideshow = remark.create({
				ratio: '16:9',
				highlightStyle: 'tomorrow-night-eighties'
			});
		</script>
	</body>
</html>